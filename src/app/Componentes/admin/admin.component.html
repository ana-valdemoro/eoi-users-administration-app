<div class="add-user-from-content" *ngIf="session">
    <h2>Crear Alumno</h2>
    <form #myForm="ngForm" class="add-from">
        <label for="name">Nombre del Alumno</label>
        <input id="name" type="text" [(ngModel)]="newAlumn.name" name="name" #name="ngModel" pattern="^[a-zA-ZáéíóúÁÉÍÓÚ]{2,}\s[a-zA-ZáéíóúÁÉÍÓÚ]{4,}\s*[a-zA-ZáéíóúÁÉÍÓÚ]*$" required>
        <div *ngIf="name.invalid && (name.dirty || name.touched)">
            <div *ngIf="name.errors.required">
                <p>Se require el campo Nombre.</p>
            </div>
            <div *ngIf="name.errors.pattern">
                <p>El nombre no cumple el patrón.</p>
            </div>
        </div>

        <label for="email">Correo</label>
        <input id="email" type="text" [(ngModel)]="newAlumn.loginEmail" name="loginEmail" #loginEmail="ngModel" appEmailValidator>
        
        <div *ngIf="loginEmail.invalid && (loginEmail.dirty || loginEmail.touched)">
            <div *ngIf="loginEmail.errors.cus_required">
                <p>Se require el campo email.</p>
            </div>
            <div *ngIf="loginEmail.errors.shouldMatchPattern">
                <p>Email debe tener un formato de dominio válido</p>
            </div>
        </div>  
        <label for="pass">Contraseña</label>
        <input id="pass" type="password" minlength="5" [(ngModel)]="newAlumn.password" name="password" #password="ngModel" required>
        <div *ngIf="password.invalid && (password.dirty || password.touched)"> 
            <div *ngIf="password.errors.required">
                <p>Se require el campo contraseña.</p>
            </div>
            <div *ngIf="password.errors.minlength">
                <p>Contraseña mayor de 5 caracteres.</p>
            </div>
        </div>   
        <label for="course">Curso al que pertenece:</label>
        <mat-form-field >
            <mat-select id="course" [(ngModel)]= "newAlumn.mainCourse" name="courseName"  #courseName = "ngModel" required>
              <mat-option *ngFor="let course of courses" [value]="course.name">
                {{ course.name }}
              </mat-option>
            </mat-select>
        </mat-form-field>
        <div *ngIf="courseName.invalid && (courseName.dirty || courseName.touched)">
            <div *ngIf="courseName.errors.required">
                <p>Elige una opción de curso</p>
            </div>    
        </div>
        <button (click)="createNewAlumn(myForm)">Dar de Alta</button>
    </form>
</div>
<div class="drop-zone">
    <label for="img" (dragover)="isDraging = true" (dragleave)="isDraging = false" [ngStyle]="{ 'background-color': isDraging ? '' : 'rgb(221, 221, 221)' }" >
        <input type="file" multiple="false" accept=".xls,.xlsx,.ods" id="img" (change)="onFileChange($event)" >
        <div class="upload-file">
            <button>Subir archivo</button>
            <span>Arrastra el archivo aqui</span>
        </div>
    </label>
    <mat-progress-bar mode="query"></mat-progress-bar>
</div>
<h1>Alumnos Cargados</h1>
<ul class="excel-alumn-list">
    <li *ngFor="let excelAlumn of excelAlumnList">
        <div>
            <div class="img-content">
                <img src="{{ excelAlumn.courseImg }}" alt="">
                <div>{{ excelAlumn.courseImg }}</div>
            </div>
            <div class="user-info-content">
                <div>
                    <div class="user-img-icon">
                        <img src="../../../assets/usuario.svg" alt="">
                    </div>
                    <div class="user-info">
                        <h2 class="fucking-angular">{{ excelAlumn.name }}</h2>
                        <h3 class="fucking-angular">{{ excelAlumn.loginEmail }}</h3>
                    </div>
                </div>
                <div></div>
                <div>
                    <button class="delete" (click)="deleteAlumn(excelAlumn)">Eliminar</button>
                    <button class="create" (click)="addAlumnToDB(excelAlumn)">Crear</button>
                </div>
            </div>
        </div>
    </li>
</ul>

<!-- Los inputs son para cursos de fuera de la EOI, no ?¿ si es así faltaría el nombre del curso-->
<form>
    <input placeholder="Nombre del curso" type="text" name="name" id="" [(ngModel)]="course.name" ><br>
    <input placeholder="Duración del curso" type="text" name="hours" id="" [(ngModel)]="course.hours" ><br>
    <input placeholder="Descripción del curso" type="text" name="description" id=""
        [(ngModel)]="course.description"><br>
    <mat-form-field class="example-chip-list">
        <mat-chip-list #chipListProf aria-label="Professor selection">
            <mat-chip *ngFor="let professor of newcourse.professors" [selectable]="selectable"
                [removable]="removable" (removed)="removed(professor)">
                {{professor}}
                <mat-icon matChipRemove name ="cancel" *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input placeholder="Profesores:"  name ="chip-profesor" [matChipInputFor]="chipListProf"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                (matChipInputTokenEnd)="addProf($event)" />
        </mat-chip-list>
    </mat-form-field><br>
        <input placeholder="Area del curso" type="text" name="area"  [(ngModel)]="course.area" /><br>
    <input placeholder="Año de realización" type="text" name="year" [(ngModel)]="course.year" /><br>
    <mat-form-field class="example-chip-list">
        <mat-chip-list #chipList aria-label="Skill selection">
            <mat-chip *ngFor="let skill of newcourse.skills" name="select-skills" [selectable]="selectable" [removable]="removable"
                (removed)="remove(skill)">
                {{skill}}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input placeholder="Habilidades:" [matChipInputFor]="chipList" name= "chip-habilidades"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                (matChipInputTokenEnd)="add($event)">
        </mat-chip-list>
    </mat-form-field><br>

    <mat-form-field>
        <mat-select name="modality" id="" [(ngModel)]="modalitySelected">
            <mat-option [value]="modality" *ngFor="let modality of modalities">{{ modality }}</mat-option>
        </mat-select><br>
    </mat-form-field>
    <button (click)="addCourse()">Añadir curso</button> 
</form>
